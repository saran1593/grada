<!-- <link rel="stylesheet" href="css/components/contact.css"> -->

<section class="grad-contact-section">
    <div class="container-fluid">
        <div class="row g-0 align-items-center">

            <!-- Form Column -->
            <div class="col-lg-7 d-flex justify-content-center">

                <div class="grad-contact-form-container text-dark p-4 p-md-5">
                    <p class="grad-contact-eyebrow text-uppercase mb-4">GET IN TOUCH WITH US</p>

                    <form id="contactForm" novalidate>
                        <!-- Name Field -->
                        <div class="mb-4">
                            <input type="text" class="form-control grad-contact-input" id="contactName"
                                placeholder="Name" required>
                        </div>

                        <!-- Phone Number Field -->
                        <div class="mb-4">
                            <input type="tel" class="form-control grad-contact-input" id="contactPhone"
                                placeholder="Phone Number" required>
                        </div>

                        <!-- Email Field -->
                        <div class="mb-4">
                            <input type="email" class="form-control grad-contact-input" id="contactEmail"
                                placeholder="Email" required>
                        </div>

                        <!-- Message Field -->
                        <div class="mb-4">
                            <textarea class="form-control grad-contact-input" id="contactMessage" placeholder="Message"
                                rows="4" required></textarea>
                        </div>

                        <!-- Left Aligned Submit Button -->
                        <div class="text-start">
                            <button type="submit" class="btn btn-dark grad-contact-submit-btn text-uppercase fw-bold">
                                Let's Connect
                            </button>
                        </div>
                    </form>

                    <div class="grad-contact-social mt-5">
                        <div class="contact-details">
                            <p>+91 90478 56555 | <a
                                    href="mailto:vishnu@gradarchitects.com">vishnu@gradarchitects.com</a></p>
                        </div>

                        <div class="social-icons d-flex justify-content-center gap-4 mt-3">
                            <a href="mailto:vishnu@gradarchitects.com" class="social-icon">
                                <i class="fas fa-envelope fa-lg"></i>
                            </a>
                            <a href="https://wa.me/919047856555" class="social-icon">
                                <i class="fab fa-whatsapp fa-lg"></i>
                            </a>
                            <a href="tel:+919047856555" class="social-icon">
                                <i class="fas fa-phone fa-lg"></i>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
            <!-- Image Column - Hidden on mobile -->
            <div class="col-lg-5 d-flex justify-content-center d-lg-block align-items-center">
                <div class="grad-contact-map-wrapper gap-2">
                    <!-- Maps -->
                    <div class="grad-contact-map-container" id="map-kumbakonam">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6883.985030695299!2d79.37009200900319!3d10.980911009707809!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3baad2ab7e2adbc9%3A0xe69489234654bbed!2sRam%20Nagar%2C%20Kumbakonam%2C%20Tamil%20Nadu!5e0!3m2!1sen!2sin!4v1761124406092!5m2!1sen!2sin"
                            width="505" height="200" style="border:0;" allowfullscreen="" loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"></iframe>
                        <h4
                            style="letter-spacing: 3px;font-size: 1.5rem; color: #666;margin-left: 5px;text-transform: uppercase;">
                            Kumbakonam</h4>
                        <h6 style="font-size: 1rem; color: #111111; margin-left: 5px;text-align: left;">No. 34, Ram
                            Nagar,
                            K.Karupur Via,
                            <br />Kumbakonam - 612 002
                        </h6>
                    </div>
                    <div style="margin-top: 10px;"></div>

                    <div class="grad-contact-map-container" id="map-chennai">
                        <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3887.4326715899338!2d80.26211217484202!3d13.00809628731067!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a5267ef50e1fb9d%3A0x15707d8f3009a7bc!2sBesant%20Ave%20Rd%2C%20Chennai%2C%20Tamil%20Nadu%20600020!5e0!3m2!1sen!2sin!4v1761124475880!5m2!1sen!2sin"
                            width="505" height="200" style="border:0;" allowfullscreen="" loading="lazy"
                            referrerpolicy="no-referrer-when-downgrade"></iframe>
                        <h4
                            style="letter-spacing: 3px;font-size: 1.5rem; color: #666;margin-left: 5px; text-transform: uppercase;">
                            Chennai</h4>
                        <h6 style="font-size: 1rem; color: #111111; margin-left: 5px;text-align: left;">Old No 34, New
                            No
                            12, Besant Avenue, Adyar,
                            <br />Chennai - 600 020
                        </h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="toast" class="toast"></div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        initializeContactForm();
    });
    function showToast(message) {
        const toast = document.getElementById("toast");
        toast.textContent = message;
        toast.classList.add("show");
        setTimeout(() => {
            toast.classList.remove("show");
        }, 3000);
    }

    function initializeContactForm() {
        const form = document.getElementById('contactForm');

        if (!form) {
            console.error("‚ùå Contact form not found");
            return;
        }

        const newForm = form.cloneNode(true);
        form.parentNode.replaceChild(newForm, form);
        const currentForm = document.getElementById('contactForm');

        currentForm.addEventListener('submit', async function (e) {
            e.preventDefault();

            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const phone = document.getElementById('contactPhone').value.trim();
            const message = document.getElementById('contactMessage').value.trim();

            // Validation
            if (!name || !email || !phone || !message) {
                alert('Please fill in all required fields.');
                return;
            }

            // Show loading state
            const submitBtn = currentForm.querySelector('.grad-contact-submit-btn');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Sending...';
            submitBtn.disabled = true;

            try {
                await saveToGoogleSheets({ name, email, phone, message });

                // Success message
                alert('Thank you for your message! We will get back to you soon.');
                currentForm.reset();

            } catch (error) {
                console.error('Error:', error);
                alert('There was an error submitting your form. Please try again or contact us directly.');
            } finally {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        });
    }

    async function saveToGoogleSheets(formData) {
        const scriptURL = 'https://script.google.com/macros/s/AKfycbx0NylMw9o6v3LhJbrgc9yy-63GtAENElbt3f75FyNgy1R-F94i0Ujq-WD_7ZBJkno/exec';

        const response = await fetch(scriptURL, {
            method: 'POST',
            body: JSON.stringify(formData),
            headers: {
                'Content-Type': 'application/json'
            },
            mode: "no-cors"
        });
        showToast("data saved!");
        return true;
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeContactForm);
    } else {
        initializeContactForm();
    }
</script>